{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Layout",
  "description": "A layout in Foxglove",
  "type": "object",
  "properties": {
    "version": {
      "enum": ["0.0.1"],
      "default": "0.0.1",
      "description": "The version of the layout format"
    },
    "variables": {
      "$ref": "#/$defs/Variables"
    },
    "items": {
      "$ref": "#/$defs/ItemList"
    }
  },
  "required": ["version", "variables", "items", "userNodes"],
  "$defs": {
    "Variables": {
      "type": "object",
      "additionalProperties": true
    },
    "Tab": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The unique identifier for the tab"
        },
        "name": {
          "type": "string",
          "description": "The name of the tab"
        },
        "items": {
          "$ref": "#/$defs/ItemList"
        }
      },
      "required": ["id", "name", "items"]
    },
    "Tabs": {
      "type": "object",
      "properties": {
        "selectedTabId": {
          "type": "string",
          "description": "The unique identifier for the selected tab"
        },
        "tabs": {
          "type": "array",
          "items": { "$ref": "#/$defs/Tab" }
        }
      },
      "required": ["tabs"]
    },
    "Item": {
      "type": "object",
      "description": "An item in a layout with a ratio for space allocation.\n\nThe ratio determines the proportion of space this item takes up, similar to CSS flex ratio.\nFor example, if a list has 3 items with ratios 1, 2, and 3, the first item takes 1/6 of the\nspace, the second item takes 2/6, and the third item takes 3/6.",
      "properties": {
        "ratio": {
          "type": "number",
          "description": "Proportion of space this item occupies"
        },
        "content": {
          "description": "Content of the item (panel, tabs, or item list)",
          "anyOf": [
            { "$ref": "./base_panel.json" },
            { "$ref": "#/$defs/Tabs" },
            { "$ref": "#/$defs/ItemList" }
          ]
        }
      },
      "required": ["ratio", "content"]
    },
    "ItemList": {
      "type": "object",
      "properties": {
        "direction": {
          "enum": ["vertical", "horizontal"],
          "default": "horizontal"
        },
        "items": {
          "type": "array",
          "items": { "$ref": "#/$defs/Item" },
          "minItems": 1
        }
      },
      "required": ["direction", "items"]
    }
  }
}
